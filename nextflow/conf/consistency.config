params {

    // run consistency benchmark
    run_consistency_benchmark = true

    // helper script
    download_helper           = "${projectDir}/bin/consistency_benchmark/download_helper.R"
    transformation_helper     = "${projectDir}/bin/transformations/transformation_helper.R"
    

}

process {

    container = "suzannejin/benchmark-neighbour:main"

    withName: GET_10X_DATA_FOR_CONSISTENCY_BENCHMARK {
        storeDir  = { "${params.OUTPUT_DIR}/consistency/data" }
        time      = { workflow.stubRun ? 10.min : 1.h   * task.attempt } 
        memory    = { workflow.stubRun ? 1.GB   : 10.GB * task.attempt } 
        cpus      = { workflow.stubRun ? 1      : 1     * task.attempt }
        container = "${container}"
    }
    withName: PLOT_10X_DATA {
        storeDir  = { "${params.OUTPUT_DIR}/consistency" }
        time      = { workflow.stubRun ? 10.min : 1.h   * task.attempt } 
        memory    = { workflow.stubRun ? 1.GB   : 10.GB * task.attempt } 
        cpus      = { workflow.stubRun ? 1      : 1     * task.attempt }
        container = "${container}"
    }
    withName: TRANSFORM_CONSISTENCY_DATA {
        storeDir  = { "${params.OUTPUT_DIR}/consistency" }
        time      = { workflow.stubRun ? 10.min : 2.h   * task.attempt } 
        memory    = { workflow.stubRun ? 1.GB   : 24.GB * task.attempt } 
        cpus      = { workflow.stubRun ? 1      : 1     * task.attempt }
        container = "${container}"
    }
    withName: CALCULATE_10X_CONSISTENCY {
        storeDir  = { "${params.OUTPUT_DIR}/consistency" }
        time      = { workflow.stubRun ? 10.min : 30.min* task.attempt } 
        memory    = { workflow.stubRun ? 1.GB   : 10.GB  * task.attempt } 
        cpus      = { workflow.stubRun ? 1      : 1     * task.attempt }
        container = "${container}"
    }
}